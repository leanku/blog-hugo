---
title: "ElasticSearch"
date: 2023-07-19T20:46:01+08:00
draft: false
categories: ["ElasticSearch"]
tags: ["ElasticSearch"]
keywords: ["ElasticSearch","微服务"]
---


# ElasticSearch

## API网关特点
* 集合多个API，统一API入口
* 避免内部信息泄露
* 提供安全认证
* 支持混合通讯协议
* 降低微服务复杂度

常用的API网关有：NGINX，Zuul，Kong
  

## Lucene 介绍
  Lucene是开源、免费、高性能、纯Java编写的全文检索工具包

  他是一个全文检索的工具包，是一个全文检索框架，并不是一个全文检索引擎

  它非常复杂，并且需要Java集成使用

## Lucene 和 ElasticSearch

* ElasticSearch和solr是基于lucene的开源项目
* ElasticSearch通过简单易用的restful api接口，隐藏了lucene的复杂性
* ElasticSearch自带分布式管理，并且可以跨语言使用

## Lucene 和 Solr
* ElasticSearch自带分布式管理而Solr需要借助Zookpeeper实现分布式管理
* Solr支持多格式的数据，在传统搜索中表现好于ES,但是它的更新效率比较低
* ElasticSearch只支持json格式的数据，在处理实时索引搜索时明显好于Solr

## 全文索引
通过扫描文章中的每一个词，对每一个词建立一个索引。指明词在文章中出现的次数和位置，当用户查询时，检索程序就根据事先建立的索引进行查找，并将查找到的结果反馈给用户的检索方式。

一般是针对非结构化数据使用的

## 倒排索引
倒排索引和正排索引正好相反，它是单词和文档的存储方式。大家最了解的例子就是新华字典，比如一个字 倒 怎么查字典，把倒拆分，显示单立人旁，然后是到8划，通过两部查出一个页码，这个页码就相当于文档的ID

倒排索引主要有两部分组成， “单词词典” 和 “倒排文件”。 
单词词典（Lexicon）：搜索引擎的通常索引单位是单词，词典记录所有文档的单词，并且记录单词到倒排列表的关联信息也就是指向“倒排列表”的指针。

倒排列表（PostingLIst）：倒排列表记录了出现了某个单词的所有文档编号。

倒排文件（Inverted File）：所有单词的倒排列表往往顺序的存储在磁盘的某个文件里，这个文件即被称之为倒排文件，倒排文件是存储倒排索引的物理文件

## ik分词器
一个标准的中文分词器。可以根据定义的字典对域进行粉刺，并且支持用户配置自己的字典，所以它除了可以按通用的习惯分词外，还可以定制化分词。 可以使用插件的方式将他接入到ES。

ik分词器有两种分词方式：ik_smart最粗粒度的拆分和ik_max_word最细粒度的拆分。


