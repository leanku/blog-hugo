---
title: "PHP位运算使用"
date: 2023-02-28T22:33:45+08:00
draft: false
categories: ["PHP"]
tags: ["PHP"]
keywords: ["PHP"]
---



## PHP 位运算介绍

> 位运算符允许对整型数中指定的位进行求值和操作。 以下是官网的一个介绍。

|例子|名称|结果|
|:--|:--|:--|
|$a & $b  |And（按位与）|将把 $a 和 $b 中都为 1 的位设为 1。|
|$a \| $b|  Or（按位或）|将把 $a 和 $b 中任何一个为 1 的位设为 1。|
|$a ^ $b|Xor（按位异或）|将把 $a 和 $b 中一个为 1 另一个为 0 的位设为 1。|
|~ $a|Not（按位取反）|将 $a 中为 0 的位设为 1，反之亦然。|
|$a << $b|Shift left（左移）|将 $a 中的位向左移动 $b 次（每一次移动都表示 “乘以 2”）。|
|$a >> $b|Shift right（右移）|将 $a 中的位向右移动 $b 次（每一次移动都表示 “除以 2”）。|
详情请点击[这里](http://php.net/manual/zh/language.operators.bitwise.php)了解。


## 平常开发需要用位运算吗？
位运算符都是针对整数的二进制数字形式而进行的。  
我们都知道计算机中运算使用的是二进制，在我的电脑,整数有4个字节(byte),而1个字节有8位(bit)，一个整数有32位二进制来表示。

例如1的二进制表示:  
00000000 00000000 00000000 00000001  

那么位运算说简单点就是改变这32个位的值，无非是改成0或者1而已，然后变成了新的数。这样理解或者不是非常准确，但是让你至少知道位运算到底在干嘛

### 总结的几点规则：
1. 二进制的最高位是符号位:0表示正数,1表示负数

	$a = 1  
	在我的电脑,整数有4个字节(byte),而1个字节有8位(bit),因此1的实际二进制样子  
	00000000 00000000 00000000 00000001  
	符号位就是左边第一个(即0)用来表示正负,其他的0,1表示数值,例如-1的表示:  
	10000000 00000000 00000000 00000001

2. 正数和负数都有原码反码补码,不需要考虑它们是什么,计算机底层如此设计,利于数学计算,也不是我们讨论的范畴.

3. 正数的原码,反码,补码都一样。  
	例如上面的1的原码反码补码都是00000000 00000000 00000000 00000001

4. 负数的反码只需要将原码的符号位保持一致,其他位取反即可(1->0,0->1)  
	例如-1的原码为:  
	10000000 00000000 00000000 00000001  
	转换-1的反码为:  
	11111111 11111111 11111111 11111110

5. 负数的补码=它的反码+1  
	转换-1的补码为:  
	11111111 11111111 11111111 11111110

6. 0的反码补码都是0

7. PHP没有无符号数,换言之,PHP中的数都是有符号的

8. 计算机在运算的时候,都是以补码的方式来运算的

### 开始跟着php官方手册试几个

1. ~ $a Not（按位取反） 将 $a 中为 0 的位设为 1，反之亦然。（PHP手册记录）

	例如$a = 2;echo ~ $a;  
手工计算方式:  
 2是正数,原码反码补码都是一样的,都是00000000 00000000 00000000 00000010   
 计算机运算使用的是补码,因此我们按照按位取反的规则计算2的补码来生成新的补码,也就是将2的补码中的0改为1,1改为0,得到新的补码:11111111 11111111 11111111 11111101  
 上面得到的就是新的补码了,其实在计算机中已经算计算完成了,但是我们需要校验这个补码对不对。先将补码转为反码:11111111 11111111 11111111 11111100(参考上面的规则5)  
 然后再将反码转原码:10000000 00000000 00000000 00000011(参考上面的规则4) 二进制11是3 符号位是1 ,因此结果是-3

2. $a & $b And（按位与） 将把 $a 和 $b 中都为 1 的位设为 1 ,否则为0（PHP手册记录）
	例如:  
	$a = 2;  
	$b = 3;  
	echo $a & $b;  
	手工计算方式:  
	计算2和3的补码,2的补码:00000000 00000000 00000000 00000010,3的补码:00000000 00000000 00000000 00000011  
	计算新的补码结果为:00000000 00000000 00000000 00000010  
	得到结果:第一位符号位0,表示正数,正数的原码反码补码都是一样,因此原码也是它:00000000 00000000 00000000 00000010 结果为2