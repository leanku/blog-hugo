---
title: "Redis的一些常见题 "
date: 2024-02-20T20:46:01+08:00
draft: false
categories: ["Redis"]
tags: ["Redis"]
keywords: ["Redis"]
---


# Redis的一些常见题 

1.  **redis数据类型及应用场景**
   见 [Redis的五种数据类型及使用场景](Redis的五种数据类型及使用场景.md) 

2.  **redis持久化及过期策略**
   见 [Redis持久化及过期删除策略](Redis持久化及过期删除策略.md) 

3.  **redis 常见问题及解决方案**
    
    1. **缓存雪崩**：同一时间大量缓存失效，导致请求直接查询数据库，数据库内存和CPU压力增加甚至宕机  
        解决：  
        热点数据永不过期或者分布到不同实例，降低单机故障问题  
        缓存时间添加随机数，防止大量缓存同时失效                
        做二级缓存或者双缓存，A为原始缓存 短时效，B为备份缓存 ，长期有效。更新时候双写缓存  

    2. **缓存穿透**：缓存和数据库都没有数据，大量请求下，所有请求直接击穿到数据库，导致宕机。  
        解决：  
        布隆过滤器:长度为m的位向量或者位列表组成（仅包含0或1位值的列表）  
        使用多个不用的hash函数，产生多个索引值，填充对应多个位置的值为1  
        布隆过滤器可以检查值是 “可能在集合中” 还是 “绝对不在集合中”  
        可能误判但是基础过滤效率高  
        极端情况，当布隆过滤器没有空闲位置的时候每次查询返回true  
        空缓存（短时效）  
        业务层参数过滤 

    3. **缓存击穿**：数据库中有数据，但是缓存突然失效之后发生大量请求导致数据库压力增加甚至打垮宕机
   
        解决：
        热点数据永不过期  
        互斥锁：获取锁之后不管成功还是失败都要释放锁  
4. Redis主从复制原理
    Redis 在复制时底层采用的是 psync 命令完成的数据主从同步，同步主要分为：全量复制和增量复制两种
    * 全量复制：顾名思义也就是一次性把主节点数据全部发送给从节点，所以这种情况下，当数据量比较大时，会对主节点和网络造成很大的开销。
    * 部分复制：用于处理主从复制时因网络中断等原因造成数据丢失的场景。当从节点再次和主节点连接时，主节点会补发丢失的数据。因为是补发，所以在发送的数据量一定是小于全量的数据。  
    详细见 [Redis的一些常见题 ](Redis的一些常见题%20.md)
